
<!doctype html>
<html lang="en" id="mainBody">
<link href="https://fonts.googleapis.com/css?family=Ubuntu:400,700" rel="stylesheet">

<style type="text/css">
  body {
    overflow: hidden;
  }
</style>

<head>
  <!-- Meta Properties -->
  <meta charset="UTF-8">
  <title>arras.io beta</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <!-- CSS -->
  <link rel="stylesheet" href="/main.css" />
  <!-- Version Control -->
  <script>
    var VERSION = localStorage.getItem('versionHash');
    (function versionControl() {
      let request = new XMLHttpRequest();
      let url = window.location.href + "/api/vhash";
      console.log("Checking version...");
      return new Promise((resolve, reject) => {
        request.open('GET', url);
        request.onload = () => {
          resolve(request.response);
          console.log('Version check successful.');
        };
        request.onerror = () => {
          reject(request.statusText);
          console.log('Version check failed.');
          console.log(request.statusText);
        };
        request.send();
      });
    })().then(function resolveVersion(data) {
      localStorage.setItem('versionHash', data);
      if (VERSION !== data) {
        console.log("Updating!");
        localStorage.setItem('updated', 'datgudshit');
        location.reload(true);
      }
    });
  </script>
  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="96x96" href="https://raw.githubusercontent.com/nepphhh/arrasio/master/arrasio/src/client/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">
</head>

<body oncontextmenu="return false;" id="mainBody">
  <div id="gameAreaWrapper">
    <canvas id="gameCanvas" tabindex="1" id="cvs" tabindex="1"></canvas>
  </div>
  <div id="mainWrapper">
    <div id="startMenuWrapper">
      <div id="startMenu">
        <div class="startMenuHolder">
          <div class="sliderHolder">
            <div class="slider startMenuSlidingContent">
              <center><img src="EveruxIcon.png" class="icon" /></center>
              <h1>evreux.io</h1>
                         <div class="serverSelector shadowScroll">
             <h4><a href="https://arras2.herokuapp.com">US East | Heroku | Defender</a></h4>
             <h4>US West | Heroku | Main</h4>
              </div>
              <input type="text" autofocus tabindex="1" spellcheck="false" placeholder="This is the tale of:" id="playerNameInput" maxlength="24" />
           </div>
            <div class="slider" id="startMenuSlidingTrigger">
              <h3 class="nopadding">View Options/help ðŸ¡²</h3>
            </div>
            <div class="slider" id="startMenuSlidingContent">
              <br>
              <optionsHeader>Advanced Controls:</optionsHeader><br>
              <table>
                <tr>
                  <td><b>E</b>: Auto-fire</td>
                  <td><b>C</b>: Auto-spin</td>
                </tr>
                <tr>
                  <td><b>R</b> - Override</td>
                  <td><b>N</b>: Level Up</td>
                </tr>
                <tr>
                  <td><b>Y</b> - Tongle Class Tree</td>
                  <td><b>L</b> - Open Debug Info</td>
                </tr>
                <tr>
                  <td><b>T</b> - Teleport</td>
                  <td><b>`</b> - Tongle TESTBED</td>
                </tr>
              </table>
              <optionsHeader>Options:</optionsHeader>
              <select id="optColors" tabindex="-1">
                <option value="normal">Light Colors</option>
                <option value="dark">Dark Colors</option>
                <option value="natural">Natural</option>
                <option value="classic">Classic</option>
                <option value="forest">Forest</option>
                <option value="midnight">Midnight</option>
                <option value="pastel">Snow</option>
                <option value="ocean">Coral Reef (Fan-made)</option>
                <option value="badlands">Badlands (Fan-made)</option>
                <option value="bleach">Bleach (Fan-made)</option>
                <option value="nitro">Nitro (Fan-made)</option>
              </select>
              <select id="optBorders" tabindex="-1">
                <option value="normal">Soft Borders</option>
                <option value="dark">Dark Borders</option>
                <option value="neon">Neon Mode</option>
                <option value="glass">Glass Mode</option>
              </select>
              <table>
                <tr>
                  <td>
                    <div>
                      <label><input id="optScreenshotMode" tabindex="-1" class="checkbox" type="checkbox"> Screenshot Mode</label>
                    </div>
                  </td>
                  <td>
                    <div>
                      <label><input id="optNoPointy" tabindex="-1" class="checkbox" type="checkbox"> Classic Traps</label>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div>
                      <label><input id="optFancy" tabindex="-1" class="checkbox" type="checkbox"> Low Graphics</label>
                    </div>
                  </td>
                  <td>
                    <div>
                      <label><input id="optPredictive" tabindex="-1" class="checkbox" type="checkbox"> Disable Hyperactivity</label>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div>
                      <label><input id="optMiterText" tabindex="-1" class="checkbox" type="checkbox"> Sharp Text</label>
                    </div>
                  </td>
                  <td>
                    <div>
                      <label><input id="optMiter" tabindex="-1" class="checkbox" type="checkbox"> Sharp Edges</label>
                    </div>
                  </td>
                </tr>
                <tr>
                </tr>
              </table>
              <input type="text" class="conceal" tabindex="3" placeholder="Token (Not required, can be left blank)" id="playerKeyInput" maxlength="64" />
            </div>
          </div>
          <div style="position: relative; bottom: -10px;">
            <button id="startButton" tabindex="2">Play</button>
          </div>
        </div>
        <div class="startMenuHolder" allowtransparency="true">
          <iframe id="patchNotesIFrame" src="changelog.html" seamless='seamless' frameBorder="0">Patch notes go here!</iframe>
        </div>
      </div>
    </div>
  </div>
  <!-- JS -->
  <script src="//code.jquery.com/jquery-2.2.0.min.js"></script>
  <script src="/app.js"></script>
  <script>
    var clicked = true;
    $("#startMenuSlidingTrigger").on('click', function() {
      if (clicked) {
        clicked = false;
        $(this).html('<h3 class="nopadding">close options/help ðŸ¡¶</h3>');
        $(".slider").css({
          "top": "-265px"
        })
      } else {
        clicked = true;
        $(this).html('<h3 class="nopadding">view options/help ðŸ¡²</h3>');
        $(".slider").css({
          "top": 0
        });
      }
    });
  </script>
  <script>
    $(document).ready(function() {
      // This is because it acts weird in Chrome for whatever reason...
      $("#twitterHolder").css({
        "height": "100%"
      });
      // This is for updates
      if (localStorage.getItem('updated') === 'datgudshit') {
        localStorage.setItem('updated', false);
        $('#patchNotesIFrame').load(function() {
          $("#patchNotesIFrame").contents().find('#patchNotes').prepend('<update>New update!</update> ');
        });
      }
    });
  </script>
</body>

</html>
